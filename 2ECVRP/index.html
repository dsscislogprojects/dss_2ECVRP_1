<!DOCTYPE html>
<html lang="pt-br">

<!-- Este trecho inicializa a importação de bibliotecas gráficas javascript para criação da página -->
<head>
	<meta charset="UTF-8">
	<!-- Iniciando viewport para principios de responsividadea - mobile first -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1, user-scalable=no">
	
	<title>Routing Analysis Case</title>

	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/helium-css/1.1/helium.min.js"></script>
	
	<!-- Bootstrap core -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	
	<!-- Bootstrap core - ferramentas de toggle - https://gitbrent.github.io/bootstrap4-toggle/ -->
	<link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>


	<!-- leaflet -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
	
	<!-- leaflet Routing Machine-->
	<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
	<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

	<!-- Ajax -->
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
	
	<!-- Google Icons -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

	
	<!-- page style -->
	<link rel="stylesheet" href="styles/style.css">
	
	<!-- map style -->
	<link rel="stylesheet" href="styles/map-style.css">
	
</head>

<!-- Este trecho cria toda a estrutura "física" da página, com botões, gráficos, etc. -->
<body>
	<!-- Este trecho apresenta o menu de navegacao -->
	<header>
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="max-height: 50px;>
			<a class="navbar-brand" href="#"><img src="common_components/img/logos/dss-mini.png" style="width: 35px; height: 40px;" /></a>
			<a class="navbar-brand" href="../" style="font-size: 3em;">  G D S S  </a>
			<ul class="nav nav-tabs" id="myTab">
				<li class="nav-item">
					<a class="nav-link" id="0" href="#">Optimization</a>
				</li>
			</ul>
		</nav>
	</header>
	<div class="container" style="width: 90vw;">
		<div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6" style="height: 100%">
			<div class="row" style="heigth: 20%;">
				<div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 textOnMap titleScenario">
					<!-- titulo da seção -->
					<div class="bpu" style="margin-top:15px">
						<h3 class="bpv bpw" id="cenarioAtual">ROUTES MENU<span></span></h3>
					</div>
				
					<!-- opções do menu -->
					<div class="row">			
						<!-- escolhe cenario favorito -->
						<label for="Select_Route" style="width:20%; text-align: right;padding-right: 4px;">Rota</label>
						<select name="Select_Route" id="Select_Route" style="width:30%;padding-right: 4px;" onChange="javascript:show_specific_route(this.value)">
							<option value="All" selected>Todas</option>
							<!-- aqui entram os cenarios salvos na aba de otimizaçao -->
						</select>
					</div>
					<div class="row">
						<label>  </label>
					</div>
					<div class="row">
						<div class="form-check"><!-- Usei class do bootstrap switch mas nao funcionou, por isso o st-->
							<button id="btn-optimize" type="button" class="btn btn-primary" onclick="Optmize()">Optimize</button>
							<input type="checkbox" checked data-toggle="toggle" data-size="xs" id="check-input-show_full_markes" onchange="javascript:change_show_full_markes(this)" checked>
							<label class="form-check-label" for="check-input-show_full_markes">Mostrar Labels On Map</label>
						</div>				
					</div>
					<div class="row">
						<label>  </label>
					</div>
				</div>
			</div>
			
		</div>
	</div>
	<style>
		#map {
			width: auto;
			height: 100%;
		}
	</style>
	<div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="width: 100%; height: 80vh;">
		<div id="map"/>
    </div>

		
	
	
	
    <script src="./js/scripts_bottons_on_Screen.js"></script>
	
	<script src="./js/locais.js"></script>
	<script src="./js/iconMaps.js"></script>
	<script src="./js/routes.js"></script>
	<script src="./js/scriptAlgoritmoEscalaCores.js"></script>
	<script src="./js/maps_function.js"></script>
	<script src="./js/maps.js"></script>
	<script src="./js/scripts_bottons_on_Screen.js"></script>
	
	<script>
		// Adicionar opçoes de selecao de rotas
		function add_Routes_Select(){
			select = document.getElementById('Select_Route');

			for (var i = 0; i<routes.length; i++){
				var opt = document.createElement('option');
				opt.value = i;
				opt.innerHTML = "Rota " + (i+1);
				select.appendChild(opt);
			}
		}
		
		function callApi(){
			// Realiza requisição na API
			data = {
				  language: 'Python',
				  framework: 'Flask',
				  website: 'Scotch',
				  version_info: {
					python: '3.9.0',
					flask: '1.1.2'
				  },
				  examples: ['query', 'form', 'json'],
				  boolean_test: true
				}
			$.ajax({
				type: "post",
				//method: "POST", //informamos qual método/verbo HTTP será utilizado na requisição;
				url: "https://rvpapiteste.herokuapp.com/Capacited_nearest_neighbor", // informamos a URL para a qual enviaremos a requisição;
				dataType: "json",
				data: JSON.stringify(json_locals), // enviamos alguma informação no corpo da requisição.
				contentType: "application/json; charset=utf-8",
				beforeSend : function(){
					//$("#resultado").html("ENVIANDO...");
					$("#btn-optimize").html("ENVIANDO...");
				}
			}).done(function(response){
				 
				 routes = response.routes;
				 Preparar_Layers_de_Rotas();// Função que gerar layers das rotas - in: js/routes.js
				 //console.log(routes);
				 show_specific_route("All");
				 add_Routes_Select();
				 map.fitBounds(bounds_all); //Ajusta baseado em todos os pontos // bounds_all vem de js/maps.js
				 
				 //console.log("finished");
				 $("#btn-optimize").html("Optimized");
			})
			.fail(function(jqXHR, textStatus, msg){
				 alert(msg);
				 $("#btn-optimize").html("Optimize");
			});
		}
	
	
		function Optmize(){
			callApi()
		}
	</script>
</body>

</html>